---
config:
  theme: neutral
  layout: elk
---
flowchart TD
    A[Abrir Dashboard] --> B{¿Hay evaluación activa?}
    
    B -->|No| C[Todas las competencias muestran 'Nivel -']
    B -->|Sí| D[Competencias activas muestran nivel actual]
    
    C --> E[Hacer clic en 'Comenzar evaluación' en cualquier competencia]
    D --> F[Solo competencia actual habilitada, otras deshabilitadas]
    
    E --> G[Se abre popover de niveles]
    G --> H[Seleccionar 'Nivel Básico']
    H --> I[Inicia test de primera competencia del área]
    
    I --> J[Responder pregunta 1]
    J --> K[Anillo se actualiza a 33%]
    K --> L[Responder pregunta 2]
    L --> M[Anillo se actualiza a 66%]
    M --> N[Responder pregunta 3]
    N --> O[Anillo se actualiza a 100%]
    
    O --> P{¿Es la última competencia del área?}
    
    P -->|No| Q[Navega automáticamente a siguiente competencia]
    Q --> R[Nuevo test con anillo en 0%]
    R --> J
    
    P -->|Sí| S{¿Todas las competencias del área completadas?}
    
    S -->|Sí| T[Redirige a /area-results]
    S -->|No| U[Vuelve al dashboard]
    
    T --> V[Página de resultados del área]
    V --> W[Mostrar puntuación general y por competencia]
    W --> X{Acción del usuario}
    
    X -->|Clic en 'Volver al dashboard'| Y[Resetea evaluación y va al dashboard]
    X -->|Clic en 'Continuar evaluación'| Z[Avanza al siguiente nivel]
    
    Y --> A
    Z --> AA[Inicia Nivel Intermedio de la misma área]
    AA --> BB[Primera competencia del área en nuevo nivel]
    BB --> I
    
    U --> A
    
    style A fill:#e1f5fe
    style T fill:#f3e5f5
    style V fill:#f3e5f5
    style I fill:#fff3e0
    style K fill:#e8f5e8
    style M fill:#e8f5e8
    style O fill:#e8f5e8